local library = {}

-- Function to add a window to the UI
function library:AddWindow(titleText)
    local player = game:GetService("Players").LocalPlayer
    local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
    gui.Name = "lume"

    -- Create the main frame
    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0, 600, 0, 350)
    mainFrame.Position = UDim2.new(0.5, -300, 0.5, -175)
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)  -- Main frame stays grey (unchanged)
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = gui
    mainFrame.Active = true
    mainFrame.Draggable = true

    -- Create UICorner for rounded edges
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 10)
    corner.Parent = mainFrame

    -- Create the top bar
    local topBar = Instance.new("Frame")
    topBar.Size = UDim2.new(1, 0, 0, 30)
    topBar.BackgroundColor3 = Color3.fromRGB(41, 74, 122)  -- Top bar color
    topBar.BorderSizePixel = 0
    topBar.Parent = mainFrame

    -- Create the title label
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(0, 200, 1, 0)
    title.Position = UDim2.new(0, 10, 0, 0)
    title.BackgroundTransparency = 1
    title.Text = titleText
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.Font = Enum.Font.GothamSemibold
    title.TextSize = 14
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = topBar

    -- Create the content holder
    local contentHolder = Instance.new("Frame")
    contentHolder.Name = "ContentHolder"
    contentHolder.Size = UDim2.new(1, 0, 1, -30)
    contentHolder.Position = UDim2.new(0, 0, 0, 30)
    contentHolder.BackgroundTransparency = 1
    contentHolder.Parent = mainFrame

    -- Create the horizontal line above the bottom section
    local line = Instance.new("Frame")
    line.Size = UDim2.new(1, 0, 0, 1)
    line.Position = UDim2.new(0, 0, 1, -40)  -- Position the line above the bottom elements
    line.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    line.BorderSizePixel = 0
    line.Parent = mainFrame

    -- Create the Display Name label (bottom left)
    local displayName = Instance.new("TextLabel")
    displayName.Size = UDim2.new(0, 200, 0, 30)
    displayName.Position = UDim2.new(0, 10, 1, -30)  -- Positioned at the bottom left
    displayName.BackgroundTransparency = 1
    displayName.Text = "Welcome, " .. player.DisplayName
    displayName.TextColor3 = Color3.fromRGB(255, 255, 255)
    displayName.Font = Enum.Font.GothamSemibold
    displayName.TextSize = 14
    displayName.Parent = mainFrame

    -- Create the FPS label (bottom right)
    local fpsLabel = Instance.new("TextLabel")
    fpsLabel.Size = UDim2.new(0, 200, 0, 30)
    fpsLabel.Position = UDim2.new(1, -210, 1, -30)  -- Positioned at the bottom right
    fpsLabel.BackgroundTransparency = 1
    fpsLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    fpsLabel.Font = Enum.Font.GothamSemibold
    fpsLabel.TextSize = 14
    fpsLabel.Parent = mainFrame

    -- Function to update FPS
    local function updateFPS()
        while true do
            local fps = tostring(game:GetService("Stats").PerformanceStats.Fps)
            fpsLabel.Text = "FPS: " .. fps
            wait(1)  -- Update every 1 second
        end
    end

    -- Call the update FPS function
    spawn(updateFPS)

    -- Return any necessary objects if needed
    return mainFrame
end

return library
