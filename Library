local Library = {}

function Library:CreateWindow(config)
    local ScreenGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
    local MainFrame = Instance.new("Frame", ScreenGui)
    MainFrame.Size = UDim2.new(0, config.min_size.X, 0, config.min_size.Y)
    MainFrame.Position = UDim2.new(0.5, -config.min_size.X / 2, 0.5, -config.min_size.Y / 2)
    MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    MainFrame.BorderSizePixel = 0

    local Header = Instance.new("TextLabel", MainFrame)
    Header.Size = UDim2.new(1, 0, 0, 40)
    Header.BackgroundColor3 = config.main_color or Color3.fromRGB(41, 74, 122)
    Header.Text = config.Name or "Window"
    Header.TextColor3 = Color3.new(1, 1, 1)
    Header.Font = Enum.Font.GothamBold
    Header.TextSize = 20
    Header.BorderSizePixel = 0

    local TabHolder = Instance.new("Frame", MainFrame)
    TabHolder.Size = UDim2.new(1, 0, 1, -40)
    TabHolder.Position = UDim2.new(0, 0, 0, 40)
    TabHolder.BackgroundTransparency = 1

    local Tabs = {}

    function Tabs:AddTab(tabName)
        local Tab = Instance.new("ScrollingFrame", TabHolder)
        Tab.Size = UDim2.new(1, 0, 1, 0)
        Tab.CanvasSize = UDim2.new(0, 0, 10, 0)
        Tab.ScrollBarThickness = 4
        Tab.Name = tabName
        Tab.BackgroundTransparency = 1

        local TabFunctions = {}

        function TabFunctions:AddToggle(name, callback)
            local ToggleFrame = Instance.new("Frame", Tab)
            ToggleFrame.Size = UDim2.new(1, -20, 0, 40)
            ToggleFrame.Position = UDim2.new(0, 10, 0, 0)
            ToggleFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            ToggleFrame.BorderSizePixel = 0

            local ToggleText = Instance.new("TextLabel", ToggleFrame)
            ToggleText.Size = UDim2.new(1, -50, 1, 0)
            ToggleText.Position = UDim2.new(0, 10, 0, 0)
            ToggleText.Text = name
            ToggleText.TextColor3 = Color3.new(1, 1, 1)
            ToggleText.BackgroundTransparency = 1
            ToggleText.Font = Enum.Font.Gotham
            ToggleText.TextSize = 16

            local ToggleButton = Instance.new("TextButton", ToggleFrame)
            ToggleButton.Size = UDim2.new(0, 40, 0, 20)
            ToggleButton.Position = UDim2.new(1, -50, 0.5, -10)
            ToggleButton.Text = "Off"
            ToggleButton.BackgroundColor3 = config.main_color
            ToggleButton.BorderSizePixel = 0
            ToggleButton.TextColor3 = Color3.new(1, 1, 1)
            ToggleButton.Font = Enum.Font.GothamBold
            ToggleButton.TextSize = 14

            local state = false
            ToggleButton.MouseButton1Click:Connect(function()
                state = not state
                ToggleButton.Text = state and "On" or "Off"
                callback(state)
            end)
        end

        function TabFunctions:AddSlider(name, options)
            local SliderFrame = Instance.new("Frame", Tab)
            SliderFrame.Size = UDim2.new(1, -20, 0, 60)
            SliderFrame.Position = UDim2.new(0, 10, 0, 0)
            SliderFrame.BackgroundColor3 = config.main_color
            SliderFrame.BorderSizePixel = 0

            local SliderLabel = Instance.new("TextLabel", SliderFrame)
            SliderLabel.Size = UDim2.new(1, -20, 0, 20)
            SliderLabel.Position = UDim2.new(0, 10, 0, 5)
            SliderLabel.Text = name
            SliderLabel.TextColor3 = Color3.new(1, 1, 1)
            SliderLabel.BackgroundTransparency = 1
            SliderLabel.Font = Enum.Font.Gotham
            SliderLabel.TextSize = 16

            local Slider = Instance.new("TextButton", SliderFrame)
            Slider.Size = UDim2.new(1, -20, 0, 20)
            Slider.Position = UDim2.new(0, 10, 0, 30)
            Slider.Text = "Value: " .. options.Min
            Slider.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
            Slider.TextColor3 = Color3.new(1, 1, 1)
            Slider.BorderSizePixel = 0
            Slider.Font = Enum.Font.Gotham
            Slider.TextSize = 14

            local value = options.Min

            Slider.MouseButton1Click:Connect(function()
                value = value + 1
                if value > options.Max then value = options.Min end
                Slider.Text = "Value: " .. value
                options(value)
            end)
        end

        return TabFunctions
    end

    return Tabs
end

return library
