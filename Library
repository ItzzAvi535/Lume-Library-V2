local library = {}

-- Function to create a new window
function library:AddWindow(title, options)
    local main_color = options.main_color or Color3.fromRGB(41, 74, 122) -- Default color
    local min_size = options.min_size or Vector2.new(600, 350)
    local can_resize = options.can_resize or false

    -- Create the main frame
    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0, min_size.X, 0, min_size.Y)
    mainFrame.Position = UDim2.new(0.5, -min_size.X/2, 0.5, -min_size.Y/2)
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
    mainFrame.Active = true
    mainFrame.Draggable = true

    -- UICorner for rounded edges on the main frame
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 10)
    corner.Parent = mainFrame

    -- Create the top bar
    local topBar = Instance.new("Frame")
    topBar.Size = UDim2.new(1, 0, 0, 30)
    topBar.BackgroundColor3 = main_color
    topBar.BorderSizePixel = 0
    topBar.Parent = mainFrame

    -- Create the title label
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(0, 200, 1, 0)
    titleLabel.Position = UDim2.new(0, 10, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = title
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.Font = Enum.Font.GothamSemibold
    titleLabel.TextSize = 14
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = topBar

    -- Create a container for tabs
    local tabsContainer = Instance.new("Frame")
    tabsContainer.Size = UDim2.new(1, 0, 0, 30)
    tabsContainer.Position = UDim2.new(0, 0, 0, 30)
    tabsContainer.BackgroundTransparency = 1
    tabsContainer.Parent = mainFrame

    -- Create content holder for tab content
    local contentHolder = Instance.new("Frame")
    contentHolder.Name = "ContentHolder"
    contentHolder.Size = UDim2.new(1, 0, 1, -60) -- The rest of the space below the tab
    contentHolder.Position = UDim2.new(0, 0, 0, 60)
    contentHolder.BackgroundTransparency = 1
    contentHolder.Parent = mainFrame

    -- Function to add a new tab
    local tabs = {}
    function library:AddTab(tabName)
        -- Create the button for the tab
        local tabButton = Instance.new("TextButton")
        tabButton.Size = UDim2.new(0, 120, 0, 30)
        tabButton.BackgroundTransparency = 1
        tabButton.Text = tabName
        tabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        tabButton.Font = Enum.Font.GothamSemibold
        tabButton.TextSize = 14
        tabButton.Parent = tabsContainer

        -- Create a frame to hold the tab content
        local tabFrame = Instance.new("Frame")
        tabFrame.Size = UDim2.new(1, 0, 1, 0)
        tabFrame.Position = UDim2.new(0, 0, 0, 0)
        tabFrame.BackgroundTransparency = 1
        tabFrame.Visible = false  -- Initially hidden
        tabFrame.Parent = contentHolder

        -- Create a separator line below the tab
        local separator = Instance.new("Frame")
        separator.Size = UDim2.new(1, 0, 0, 1)
        separator.Position = UDim2.new(0, 0, 1, 0)
        separator.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        separator.BorderSizePixel = 0
        separator.Parent = tabsContainer

        -- Show tab content when clicked
        tabButton.MouseButton1Click:Connect(function()
            -- Hide all other tab content
            for _, otherTab in pairs(tabs) do
                otherTab.tabFrame.Visible = false
            end
            -- Show the selected tab content
            tabFrame.Visible = true
        end)

        -- Add the tab to the table
        table.insert(tabs, { tabFrame = tabFrame, button = tabButton })

        return tabFrame
    end

    -- Function to add label to tab
    function library:AddLabel(tabFrame, text)
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(0, 180, 0, 30)
        label.Position = UDim2.new(0.5, -90, 0, 0)
        label.BackgroundTransparency = 1
        label.Text = text
        label.TextColor3 = Color3.fromRGB(255, 255, 255)
        label.Font = Enum.Font.GothamSemibold
        label.TextSize = 14
        label.TextScaled = true
        label.Parent = tabFrame
    end

    -- Return the window object with the function to add tabs and labels
    return {
        mainFrame = mainFrame,
        AddTab = library.AddTab,
        AddLabel = library.AddLabel
    }
end

-- Return the full library
return library
