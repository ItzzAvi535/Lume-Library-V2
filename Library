local library = {}

-- Set default UI options
local ui_options = {
    main_color = Color3.fromRGB(41, 74, 122),
    min_size = Vector2.new(250, 346),
    can_resize = false,
    corner_radius = UDim.new(0, 15),  -- Rounded corners
    font = Enum.Font.Gotham,
}

-- Create the window with rounded corners
function library:AddWindow(name, options)
    options = options or {}
    local window = Instance.new("ImageLabel")
    window.Name = name
    window.Parent = game.Players.LocalPlayer.PlayerGui
    window.Size = UDim2.new(0, options.min_size.X, 0, options.min_size.Y)
    window.Position = UDim2.new(0.5, -options.min_size.X / 2, 0.5, -options.min_size.Y / 2)
    window.BackgroundColor3 = options.main_color
    window.BorderSizePixel = 0
    window.Image = "rbxassetid://6176266590"
    window.AnchorPoint = Vector2.new(0.5, 0.5)
    window.BackgroundTransparency = 0.2
    window.ClipsDescendants = true
    window.RoundedCornersRadius = options.corner_radius

    -- Add title bar
    local title = Instance.new("TextLabel")
    title.Name = "Title"
    title.Parent = window
    title.Size = UDim2.new(1, 0, 0, 50)
    title.BackgroundColor3 = Color3.fromRGB(41, 74, 122)
    title.Text = name
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.Font = options.font
    title.TextSize = 24
    title.TextXAlignment = Enum.TextXAlignment.Center
    title.TextYAlignment = Enum.TextYAlignment.Center

    -- Create minimize/maximize functionality
    local minimizeButton = Instance.new("TextButton")
    minimizeButton.Parent = window
    minimizeButton.Size = UDim2.new(0, 100, 0, 50)
    minimizeButton.Position = UDim2.new(0.5, -50, 1, -50)
    minimizeButton.Text = "Minimize"
    minimizeButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    minimizeButton.Font = options.font
    minimizeButton.TextSize = 18

    minimizeButton.MouseButton1Click:Connect(function()
        -- Smoothly minimize the window
        local tweenService = game:GetService("TweenService")
        local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Sine, Enum.EasingDirection.Out)
        local tween = tweenService:Create(window, tweenInfo, {Size = UDim2.new(0, 250, 0, 50)})
        tween:Play()
    end)

    local maximizeButton = Instance.new("TextButton")
    maximizeButton.Parent = window
    maximizeButton.Size = UDim2.new(0, 100, 0, 50)
    maximizeButton.Position = UDim2.new(0.5, -50, 1, -100)
    maximizeButton.Text = "Maximize"
    maximizeButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    maximizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    maximizeButton.Font = options.font
    maximizeButton.TextSize = 18

    maximizeButton.MouseButton1Click:Connect(function()
        -- Smoothly maximize the window
        local tweenService = game:GetService("TweenService")
        local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Sine, Enum.EasingDirection.Out)
        local tween = tweenService:Create(window, tweenInfo, {Size = UDim2.new(0, options.min_size.X, 0, options.min_size.Y)})
        tween:Play()
    end)

    return window
end

-- Add a Tab to the window
function library:AddTab(window, tab_name)
    local tab = Instance.new("Frame")
    tab.Parent = window
    tab.Size = UDim2.new(1, 0, 0, 50)
    tab.Position = UDim2.new(0, 0, 0, 50)
    tab.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    tab.BackgroundTransparency = 0.2
    tab.BorderSizePixel = 0

    -- Tab button
    local tabButton = Instance.new("TextButton")
    tabButton.Parent = tab
    tabButton.Size = UDim2.new(0, 100, 1, 0)
    tabButton.BackgroundColor3 = ui_options.main_color
    tabButton.Text = tab_name
    tabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    tabButton.Font = ui_options.font
    tabButton.TextSize = 18
    tabButton.TextXAlignment = Enum.TextXAlignment.Center
    tabButton.TextYAlignment = Enum.TextYAlignment.Center

    tabButton.MouseButton1Click:Connect(function()
        -- Handle tab switching logic here
        print(tab_name .. " tab clicked.")
    end)

    return tabButton
end

-- Add a button to the UI
function library:AddButton(window, text, callback)
    local button = Instance.new("TextButton")
    button.Parent = window
    button.Size = UDim2.new(0, #text * 10, 0, 50)  -- Dynamic size based on text length
    button.Position = UDim2.new(0, 50, 0, 100)
    button.BackgroundColor3 = ui_options.main_color
    button.Text = text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = ui_options.font
    button.TextSize = 18
    button.TextXAlignment = Enum.TextXAlignment.Center
    button.TextYAlignment = Enum.TextYAlignment.Center

    button.MouseButton1Click:Connect(callback)

    return button
end

-- Add a label to the UI
function library:AddLabel(window, text)
    local label = Instance.new("TextLabel")
    label.Parent = window
    label.Size = UDim2.new(0, 200, 0, 50)
    label.Position = UDim2.new(0, 50, 0, 200)
    label.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    label.Text = text
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.Font = ui_options.font
    label.TextSize = 18
    label.TextXAlignment = Enum.TextXAlignment.Center
    label.TextYAlignment = Enum.TextYAlignment.Center
    label.TextStrokeTransparency = 0.5  -- Smooth font

    return label
end

return library
